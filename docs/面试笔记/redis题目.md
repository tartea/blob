###  Redis7大数据保存形式（数据结构）

string，list，hash，zset（sorted set），geo，布隆过滤器

### Redis键值全局组织结构

动态字符串，双向链表，hashtable，压缩数组，跳表，整数数组

线程模型

### 线程模型

因为redis是基于内存操作的，所以对于CPU的使用并没有那么的重要， 所以使用的是单线程，并且在单线程的方式下使用的是非阻塞的多路复用I/O。

### Redis快的原因

1、    因为redis是基于内存操作的

2、    数据结构简单

3、    使用多路复用和非阻塞I/O

4、    因为使用的是单线程，所以避免了上下文的切换

### Redis6.0为什么引入多线程？

​     使用了多线程，并不代表不在使用单线程了，在redis6的时候默认使用的还是单线程的方式，因为是基于内存操作的，所以将主现场的读写任务交给子线程来操作，这样可以进一步提高I/O的效率

### AOF日志

​     aof是一种往文件中追加命令的方式去记录的，它可以设置三种方式，包括每次都同步，在满足条件的时候同步，默认是一秒钟一次，不同步，随着磁盘刷新然后同步

###  RDB快照

​     rdb同步是将整个数据库同步，另外它包含了同步操作和异步操作两种方式

### 缓存穿透/击穿/雪崩

#### 缓存穿透

​          在查询某个数据的时候，redis没有命中，并且mysql中也没有命中，针对这种情况

####  缓存击穿

​          在redis中缓存失效的时候，正好大批量的查询过来了，所以压力全部落到了数据库上面

#### 缓存雪崩

​          大批量的缓存失效 

### 缓存过期淘汰策略

​     定期删除，redis默认会1秒内扫描10次，检查过期的key，然后删除

​     惰性删除；只有到访问它的时候，才会将其删除

###      内存淘汰策略

​     1、内存满的时候，如果再次添加，那么返回异常

​     2、删除最久没有使用的键

​     3、随机删除

​     4、删除使用频率最小的键

​     5、从设置了过期时间的键中，删除最久没有使用的键

​     6、从设置了过期时间的键中，删除使用频率最小的键

​     7、从设置了过期时间的键中，随机删除

​     8、从设置了过期时间的键中，删除模式就要过期的键

### 异步队列

使用list作为队列，然后使用redis的发布订阅模式，可以简单的实现一个异步队列

### 延时队列

使用zset队列，然后将到期的时间作为排序的规则，然后使用命令zrangebysocre查询到期的时间

### 分布式锁

使用setnx对键值对设置过期时间，然后在规定的时间内如果有人获取，那么因为被锁住了，所以该任务就会处于等待的过程中。

### 缓存一致性问题

- 更新数据库，然后在更新缓存
- 更新缓存，在更新数据库
- 删除缓存，更新数据库
- 更新数据库，后删除缓存

### redis部署方式

单节点

主从模式

哨兵模式

集群模式